<div class="rw-asset">

    <h1 ng-if="vm.asset.id">Edit Asset #{{ vm.asset.id }}</h1>

    <hr/>

    <!-- Asset Editing Form -->
    <form class="form-horizontal">

        <div class="form-group">
            <label class="col-sm-2 control-label">Submitted</label>
            <div class="col-sm-10">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="vm.asset.submitted">
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Tags</label>
            <div class="col-sm-10">
                <multiselect
                    ng-if="vm.selected_tags"
                    ng-model="vm.selected_tags"
                    options="vm.tags"
                    id-prop="id"
                    display-prop="value">
                </multiselect>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Weight</label>
            <div class="col-sm-10">
                <rzslider
                    rz-slider-model="vm.asset.weight"
                    rz-slider-options="{floor: 0, ceil: 99}"
                ></rzslider>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Volume</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="volume" ng-model="vm.asset.volume">
            </div>
        </div>

        <local-inputs model="vm.asset" field="loc_description" title="Description"></local-inputs>

        <!-- TODO: Determine why this isn't appearing in the Django Roundware admin page? -->
        <!-- <local-inputs model="vm.asset" field="loc_alt_text" title="Alt Text"></local-inputs> -->

        <hr/>

        <!-- Note that we use vm.marker's attributes as the model here -->
        <div class="form-group">
            <label class="col-sm-2 control-label">Latitude</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="latitude" ng-model="vm.marker.lat">
            </div>
            <label class="col-sm-2 control-label">Longitude</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="longitude" ng-model="vm.marker.lng">
            </div>
        </div>

        <hr/>

        <!-- Leaflet map for dragging the marker around -->
        <leaflet
            height="400px"
            center="vm.leaflet.center"
            defaults="vm.leaflet.defaults"
            markers="vm.leaflet.markers"
        ></leaflet>

        <hr/>

        <!-- Lookup an address using Nominatim -->
        <div class="form-group">
            <div class="col-sm-10">
                <input type="text" class="form-control" id="geocode" ng-model="vm.geocode.query">
            </div>
            <div class="col-sm-2">
                <button class="btn btn-block btn-primary" ng-click="vm.geocode.search()">Geocode</button>
            </div>
        </div>

        <!-- Output for geocoding search results -->
        <button
            ng-repeat="result in vm.geocode.results"
            class="btn btn-block btn-sm btn-default"
            ng-click="vm.setLocation( result.lat, result.lng )"
            style="text-align: left"
        >{{ result.title }}</button>

        <hr/>

        <!-- Save and Cancel buttons -->
        <div class="row">
            <div class="col-xs-6">
                <button type="button" class="btn btn-default"
                        ng-click="vm.cancel()">Cancel</button>

            </div>
            <div class="col-xs-6">
                <button type="submit" class="btn btn-block btn-primary"
                        ng-click="vm.save()" ng-disabled="vm.saving">Save</button>
            </div>
        </div>

    </form>

</div>