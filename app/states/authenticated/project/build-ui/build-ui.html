<div class="rw-build-ui">

    <!-- UI Mode select -->
    <div class="form-group row">
        <div class="col-sm-2">
            <p class="form-control-static"><strong>UI Mode</strong></p>
        </div>
        <div class="col-sm-10">
            <div class="btn-group pull-right" data-toggle="buttons">

                <label class="btn btn-primary" ng-repeat="mode in vm.ui_modes" ng-class="{'active': vm.mode == mode.value}">
                    <input type="radio" ng-model="vm.mode" value="{{ mode.value }}"> {{ mode.label }}
                </label>

            </div>
        </div>
    </div>

    <hr/>

    <!-- UI Groups -->
    <div id="rw-tree-ui-groups" ui-tree="vm.groupTreeOptions">

        <ol ui-tree-nodes="" ng-model="vm.groupTree">
            <li ng-repeat="group in vm.groupTree" ui-tree-node>

                <div ui-tree-handle>
                    <span>{{ group.index }} / {{ group.tag_category.name }} / {{ group.name }}</span>

                    <!-- TODO: Use the button directive here? -->

                    <button data-nodrag
                        class="btn btn-xs btn-default btn-square pull-right"
                        modal-href="ui-group-edit"
                        modal-data="{ id: group.id }"
                    ><span class="glyphicon glyphicon-edit"></span></button>

                </div>

            </li>
        </ol>

    </div>

    <hr/>

    <!-- UI Items -->
    <div id="rw-tree-ui-items" ui-tree="vm.itemTreeOptions">

        <ol ui-tree-nodes="" ng-model="vm.itemTree">
            <li ng-repeat="node in vm.itemTree" ui-tree-node ng-include="'ui-item-node.html'"></li>
        </ol>

    </div>

    <!-- Nested node template for UI Items -->
    <script type="text/ng-template" id="ui-item-node.html">
        <div ui-tree-handle>
            <span>{{ node.group.index }} / {{ node.index }} / {{ node.tag.value }}</span>
        </div>
        <ol ui-tree-nodes="" ng-model="node.nodes" data-parent-id="{{ node.id }}">
            <li ng-repeat="node in node.nodes" ui-tree-node ng-include="'ui-item-node.html'"></li>
        </ol>
    </script>

</div>
